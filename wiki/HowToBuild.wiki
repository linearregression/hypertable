#summary How to Build Hypertable on Various Platforms
<wiki:toc/>

== CentOS 5.2 64-bit ==

_EC2:  ami-0be90e62_

_Basic Dependencies_

{{{
rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/x86_64/epel-release-5-3.noarch.rpm
yum install gcc-c++ make cmake python-devel bzip2-devel zlib-devel expat-devel
wget http://downloads.sourceforge.net/boost/boost_1_38_0.tar.bz2
bzip2 -d boost_1_38_0.tar.bz2
tar -xvf boost_1_38_0.tar
cd boost_1_38_0
./configure
make
make install
cd /etc/yum.repos.d
wget http://dries.eu/pub/dries-el.repo
yum install log4cpp-devel git-core cronolog google-perftools-devel libevent-devel readline-devel ncurses-devel
wget http://internap.dl.sourceforge.net/sourceforge/sigar/hyperic-sigar-1.6.2.tar.gz
tar -xzvf hyperic-sigar-1.6.2.tar.gz
cp hyperic-sigar-1.6.2/sigar-bin/include/*.h /usr/local/include
cp hyperic-sigar-1.6.2/sigar-bin/lib/libsigar-amd64-linux.so /usr/local/lib
wget http://download.oracle.com/berkeley-db/db-4.7.25.tar.gz
tar -xzvf db-4.7.25.tar.gz
cd db-4.7.25/build_unix/
../dist/configure --enable-cxx
make
make install
sh -c "if [ ! -e /etc/hosts ]; then echo '127.0.0.1	localhost.localdomain	localhost' > /etc/hosts ; fi"
sh -c "echo '/usr/local/lib' > /etc/ld.so.conf.d/local.conf"
sh -c "echo '/usr/local/BerkeleyDB.4.7/lib' > /etc/ld.so.conf.d/BerkeleyDB.4.7.conf"
/sbin/ldconfig
}}}

_Thrift Broker Dependencies_

See this [http://wiki.apache.org/thrift/ThriftInstallation official thrift installation wiki page] for up-to-date installation instructions.  Fetch JDK rpm from [http://java.sun.com/javase/downloads/index.jsp Sun JAVA Download] page

{{{
wget -O jdk-6u13-linux-i586-rpm.bin <really-long-url-from-sun>
chmod 755 jdk-6u13-linux-i586-rpm.bin
./jdk-6u13-linux-i586-rpm.bin
yum install ant automake libtool flex bison pkgconfig libevent-devel ruby-devel perl-Bit-Vector php
wget http://dag.wieers.com/rpm/packages/perl-Class-Accessor/perl-Class-Accessor-0.31-1.el5.rf.noarch.rpm
yum localinstall perl-Class-Accessor-0.31-1.el5.rf.noarch.rpm
wget -O thrift.tgz http://tr.im/hu0b  (See hypertable README for location of working Thrift snapshot)
tar -xzvf thrift.tgz
cd thrift
./bootstrap.sh
./configure
make
make install
/sbin/ldconfig
}}}



== CentOS 5.1 32-bit ==

_EC2:  ami-0459bc6d_

_Basic Dependencies_

{{{
rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-3.noarch.rpm
yum install gcc-c++ make cmake python-devel bzip2-devel zlib-devel expat-devel
wget http://downloads.sourceforge.net/boost/boost_1_37_0.tar.bz2
bzip2 -d boost_1_37_0.tar.bz2
tar -xvf boost_1_37_0.tar
cd boost_1_37_0
./configure
make
make install
cd /etc/yum.repos.d
wget http://dries.eu/pub/dries-el.repo
yum install log4cpp-devel git-core cronolog google-perftools-devel libevent-devel readline-devel ncurses-devel
wget http://internap.dl.sourceforge.net/sourceforge/sigar/hyperic-sigar-1.6.0.tar.gz
tar -xzvf hyperic-sigar-1.6.0.tar.gz
cp hyperic-sigar-1.6.0/sigar-bin/include/*.h /usr/local/include
cp hyperic-sigar-1.6.0/sigar-bin/lib/libsigar-x86-linux.so /usr/local/lib/
wget http://download.oracle.com/berkeley-db/db-4.7.25.tar.gz
tar -xzvf db-4.7.25.tar.gz
cd db-4.7.25/build_unix/
../dist/configure --enable-cxx
make
make install
sh -c "if [ ! -e /etc/hosts ]; then echo '127.0.0.1	localhost.localdomain	localhost' > /etc/hosts ; fi"
sh -c "echo '/usr/local/lib' > /etc/ld.so.conf.d/local.conf"
sh -c "echo '/usr/local/BerkeleyDB.4.7/lib' > /etc/ld.so.conf.d/BerkeleyDB.4.7.conf"
/sbin/ldconfig
}}}

_Thrift Broker Dependencies_

See this [http://wiki.apache.org/thrift/ThriftInstallation official thrift installation wiki page] for up-to-date installation instructions.  Fetch JDK rpm from [http://java.sun.com/javase/downloads/index.jsp Sun JAVA Download] page

{{{
wget -O jdk-6u12-linux-i586-rpm.bin <really-long-url-from-sun>
chmod 755 jdk-6u12-linux-i586-rpm.bin
./jdk-6u12-linux-i586-rpm.bin
yum install ant automake libtool flex bison pkgconfig libevent-devel ruby-devel perl-Bit-Vector php
wget http://dag.wieers.com/rpm/packages/perl-Class-Accessor/perl-Class-Accessor-0.31-1.el5.rf.noarch.rpm
yum localinstall perl-Class-Accessor-0.31-1.el5.rf.noarch.rpm
wget -O thrift.tgz http://tr.im/hu0b  (See hypertable README for location of working Thrift snapshot)
tar -xzvf thrift.tgz
cd thrift
./bootstrap.sh
./configure
make
make install
/sbin/ldconfig
}}}

== Fedora Core 8 32-bit ==

_EC2:  ami-5647a33f_

_Basic Dependencies_

{{{
yum install git gcc-c++ make cmake python-devel bzip2-devel zlib-devel expat-devel
wget http://downloads.sourceforge.net/boost/boost_1_37_0.tar.bz2
bzip2 -d boost_1_37_0.tar.bz2
tar -xvf boost_1_37_0.tar
cd boost_1_37_0
./configure
make
make install
wget http://dag.wieers.com/rpm/packages/log4cpp/log4cpp-1.0-1.el5.rf.i386.rpm
rpm -i log4cpp-1.0-1.el5.rf.i386.rpm 
wget http://dag.wieers.com/rpm/packages/log4cpp/log4cpp-devel-1.0-1.el5.rf.i386.rpm
rpm -i log4cpp-devel-1.0-1.el5.rf.i386.rpm 
yum install cronolog google-perftools-devel libevent-devel readline-devel ncurses-devel db4-devel
wget http://internap.dl.sourceforge.net/sourceforge/sigar/hyperic-sigar-1.6.0.tar.gz
tar -xzvf hyperic-sigar-1.6.0.tar.gz
cp hyperic-sigar-1.6.0/sigar-bin/include/*.h /usr/local/include
cp hyperic-sigar-1.6.0/sigar-bin/lib/libsigar-x86-linux.so /usr/local/lib/
sh -c "echo '/usr/local/lib' > /etc/ld.so.conf.d/local.conf"
/sbin/ldconfig
}}}

_Thrift Broker Dependencies_

See this [http://wiki.apache.org/thrift/ThriftInstallation official thrift installation wiki page] for up-to-date installation instructions.  Fetch JDK rpm from [http://java.sun.com/javase/downloads/index.jsp Sun JAVA Download] page

{{{
wget -O jdk-6u12-linux-i586-rpm.bin <really-long-url-from-sun>
chmod 755 jdk-6u12-linux-i586-rpm.bin
./jdk-6u12-linux-i586-rpm.bin
yum install ant automake libtool flex bison pkgconfig libevent-devel ruby-devel perl-Bit-Vector perl-devel php
wget -O thrift.tgz http://tr.im/hu0b  (See hypertable README for location of working Thrift snapshot)
tar -xzvf thrift.tgz
cd thrift
./bootstrap.sh
./configure
make
make install
/sbin/ldconfig
}}}

== Gentoo 2007.0 ==

_EC2:  ami-8b8a6fe2_

_Basic Dependencies_

{{{
echo 'CONFIG_PROTECT="-*"' >> /etc/make.conf
cd /etc/
rm make.profile
ln -s /mnt/usr/portage/profiles/default-linux/x86/2008.0 make.profile
emerge --sync
}}}

== Ubuntu 8.10 Intrepid Ibex 32-bit ==

_EC2: ami-5c709435_

_Basic Dependencies_

{{{
apt-get update
apt-get install g++ make cmake libboost-dev liblog4cpp5-dev git-core cronolog libgoogle-perftools-dev libevent-dev zlib1g-dev
apt-get install libexpat1-dev liblog4cpp5-dev libboost-dev libdb4.6++-dev libncurses-dev libreadline5-dev
wget http://internap.dl.sourceforge.net/sourceforge/sigar/hyperic-sigar-1.6.0.tar.gz
tar -xzvf hyperic-sigar-1.6.0.tar.gz
cp hyperic-sigar-1.6.0/sigar-bin/include/*.h /usr/local/include
cp hyperic-sigar-1.6.0/sigar-bin/lib/libsigar-x86-linux.so /usr/local/lib/
ldconfig
}}}

_Thrift Broker Dependencies_

See this [http://wiki.apache.org/thrift/ThriftInstallation official thrift installation wiki page] for up-to-date installation instructions.

{{{
apt-get install sun-java6-jdk
update-java-alternatives --set java-6-sun
apt-get install ant autoconf automake libtool bison flex pkg-config php5 php5-cli ruby-dev libbit-vector-perl
ln -f -s /bin/bash /bin/sh
wget -O thrift.tgz http://tr.im/hu0b  (See hypertable README for location of working Thrift snapshot)
tar -xzvf thrift.tgz
cd thrift
./bootstrap.sh
./configure
make
make install
ldconfig
}}}

== Mac OS X 10.5 Leopard ==

Install [http://developer.apple.com/technology/Xcode.html XCode]

Install [http://www.macports.org/install.php MacPorts]

Once you installed !MacPorts open Terminal and type following commands as root or in sudo shell
{{{
port install libevent boost google-perftools google-sparsehash log4cpp pkgconfig
}}}

This step should take a while, but once finished you should be almost done.

Download Hyperic SIGAR from this page [http://sourceforge.net/project/showfiles.php?group_id=172552&package_id=197466&release_id=625208 Hyperic SIGAR] and unpack it
{{{
wget http://superb-west.dl.sourceforge.net/sourceforge/sigar/hyperic-sigar-1.6.2.tar.gz
tar -xzvf hyperic-sigar-1.6.2.tar.gz 
cp hyperic-sigar-1.6.2/sigar-bin/lib/libsigar-universal-macosx.dylib /usr/local/lib
cp hyperic-sigar-1.6.2/sigar-bin/include/*.h /usr/local/include
}}}

Download, configure, compile and install Thrift by typing
{{{
wget -O thrift.tgz http://tr.im/hu0b
tar -zxf thrift.tgz
cd thrift
cp /opt/local/share/aclocal/pkg.m4 aclocal
./bootstrap.sh
./configure --with-libevent=/opt/local --with-boost=/opt/local
make
make install # as root or in su/sudo shell
}}}

Download Berkeley DB from [http://download.oracle.com/berkeley-db/db-4.7.25.tar.gz here] and install it by running
{{{
tar -zxf db-4.7.25.tar.gz
cd db-4.7.25/build_unix
../dist/configure --enable-cxx
make
make install
}}}


This should effectively make all missing dependencies present on your system so you can proceed with Hypertable compilation.

== Mac OS X 10.4 Tiger ==

Same as on Leopard, except have to disable every Java target in CMakeLists files. Tiger does not support Java 6 so unless you compile hadoop by hand with your version of java, java libraries will not compile because of version mismatch. Missing hadoop support does not cripple Hypertable in any way, so you can still use it with local filesystem or !CloudStore (Kfs).

== Building, Installing, and Running Tests ==
{{{
mkdir src
cd src
git clone git://scm.hypertable.org/pub/repos/hypertable.git
mkdir -p ../build/hypertable
cd ../build/hypertable
cmake -DPHPTHRIFT_ROOT=$HOME/thrift/lib/php/src ~/src/hypertable
make
make install
make alltests
}}}