#summary Design Document for Twitter-like Application Built on Hypertable

= Introduction =

This document describes how a simple Twitter-like application can be built on Hypertable.  It's a stripped down version of Twitter that contains a user's tweet stream as well as a pane containing current user information (number of tweets, latest tweet, following, and followers).

= Details =

== Tables ==

=== Table: `profile` ===

_rowkey:  username_

This table will contain profile information for each user.

{{{
CREATE TABLE profile (
  guid,
  'display_name',
  password,
  avatar,
  bio,
  url
);
}}}

=== Table: `username` ===

_rowkey:  username_

This table will be used to register new usernames.  We will provide an API that allows you to atomically insert a column, if it does not already exists, and return the column value.  Something along the lines of:

$guid = 627918273726
$existing = INSERT_IF_NOT_EXISTS_RETURN INTO username ("joe", "guid", "$guid")

This API will be used to update this table so that two users don't end up getting assigned the same username.

{{{
CREATE TABLE 'username' (
  guid
);
}}}

=== Table: `user` ===

_rowkey: username_

This table contains 

{{{
CREATE TABLE user (
  following MAX_VERSIONS=1,
  'following_history',
  followers MAX_VERSIONS=1,
  'followers_history',
  'follow_stream',
  'follow_stream_count' COUNTER,
  'my_stream',
  'my_stream_counter' COUNTER
);
}}}

=== Table: `tweet` ===
_rowkey: username+timestamp_milliseconds_

{{{
CREATE TABLE tweet (
  message
);
}}}

== Actions ==

=== Register New User ===

=== Follow ===



=== Unfollow ===

=== Tweet ===

== Rendering ==

=== User Information ===

=== Tweet Stream ===

=== Other Users's Recent Tweets ===
