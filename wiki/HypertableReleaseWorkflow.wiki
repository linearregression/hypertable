#summary Release maintainer's notes
The example shown here is to upgrade from 0.9.0.0-alpha to 0.9.0.1-alpha. Adapt accordingly.

  # Prepare for next release
    * Update the `CHANGES` file with the list of changes for the release
    * Modify the `CMakeLists.txt` file to include the new version number
    * Update version number in `conf/Capfile.*`
    * Modify `bin/upgrade-ok.sh` if necessary
    * Run `make doc` and try to eliminate doxygen warnings
    * Update README to point to new thrift, if needed
  # Test all changes in the 'next' branch
    * First get all changes into 'next'
    * Make sure the version number is correct (e.g. 0.9.0.1 here) in the top-level CMakeLists.txt
    * Make sure 'next' is a superset of 'master', do a `git merge master`
    * Make sure tests are passing in the 'next' branch
  # Pull the changes from 'next' into 'master'
  {{{
  git checkout master
  git merge next
  }}}
  # Tag the release:
{{{
git tag -a v0.9.0.1
}}}
    Note, -a or -s is required for "git describe" used by the version mechanism in the build system)
  # Push the changes to official repository:
{{{
git push # optionally with an origin name
git push --tags # optionally with an origin name
}}}
  # Build the binary packages
    * Build them using the [http://code.google.com/p/hypertable/wiki/AMIs Hypertable Build AMIs].
    * Build a release version of the binaries
{{{
cd ~/build/hypertable/release
cmake -DPHPTHRIFT_ROOT=/usr/src/thrift/lib/php/src -DCMAKE_BUILD_TYPE=Release ~/src/hypertable
make install
}}}
    * Hack to force dependent libs to get copied into installation (see issue 524)
{{{
cd ~/build/hypertable/release
touch ~/src/hypertable/CMakeLists.txt
make install
}}}
    * Build the `.rpm` and `.tar.bz` on the CentOS 5.2 machines:
{{{
cd ~/build/hypertable/release
~/src/hypertable/bin/src-utils/htpkg --srcdir ~/src/hypertable --phpdir /usr/src/thrift-0.4.0/lib/php/src RPM TBZ2
}}}
    * Build the `.deb` on the Ubuntu machines:
{{{
cd ~/build/hypertable/release
~/src/hypertable/bin/src-utils/htpkg --srcdir ~/src/hypertable --phpdir /usr/src/thrift-0.4.0/lib/php/src DEB
}}}
    * Build the `.dmg` on a new mac:
{{{
cd ~/build/hypertable/release
~/src/hypertable/bin/src-utils/htpkg --srcdir ~/src/hypertable --phpdir /usr/src/thrift-0.4.0/lib/php/src PackageMaker
}}}
    * Create a release directory `scm.hypertable.org:/pub/download/0.9.0.1` and copy the binary packages into this directory
    * In the HTML repository, in the `com/download` directory, create a `0.9.0.1.html` file, and the previous release to the `archive.html` file and update the `index.html` link.
  # Create release tarball:
{{{
git archive --format=tar --prefix=hypertable-0.9.0.1-alpha/ v0.9.0.1 | gzip -9 > ~/tmp/hypertable-0.9.0.1-alpha-src.tar.gz
}}}
   Note: gzip compress better than bzip2 for hypertable source, go figure; the trailing / in the prefix is important.
  # Upload the tarball to the google code download area:  http://code.google.com/p/hypertable/downloads/list
  # Update github repository
  # Build binary packages using bin/src-utils/htbuild
  # Update website (in the html.git repository): change wordings in `src/*.php` and `src/*.inc` if necessary. But more importantly edit the src/release.inc to make sure variables: $download_version, $release_version and $release_date are set correctly. And then in the web root directory, run the following command:
{{{
src/generate.sh
}}}
   which will generate the html pages and the news feed.
  # Re-build doxygen source documentation, check it in (html.git) and publish it (push to the official html.git and pull in /var/www/html)
  # Send a note to the mailing lists (hypertable-...)